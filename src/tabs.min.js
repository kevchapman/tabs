!function(a){function b(b,c){var d={nav:"ul.tab_nav",mask:"div.tab_mask",speed:70,items:"div.tab_item",scroll:"div.tab_scroll",fixedHeight:!1,autosize:!1,animation:!1,startTab:0,callback:!1,initCb:!1},e=a.extend({},d,c);this.opts=e,this.ele=b,this.nav=b.find(e.nav),this.navItems=this.nav.find("a"),this.scroll=b.find(e.scroll),this.items=b.find(e.items),this.mask=b.find(e.mask),this.tabs=[],this.init()}b.prototype={init:function(){function b(){var a,b=c.tabs.length,d=window.location.hash.replace("#","");for(a=0;b>a;a++)if(d===c.tabs[a].name)return a;return-1}var c=this;this.layout(),this.navItems.each(function(b){var d=a(this);d.data({id:b}).click(function(){return c.goTo(d.data().id),!1})});var d=b();this.goTo(-1!==d?d:this.opts.startTab),this.opts.initCb?this.opts.initCb(this):""},layout:function(){var b=this;this.scroll.width(b.mask.width()*b.items.length),this.itemW=b.mask.width(),this.items.each(function(c){b.tabs[c]={ele:a(this),id:this.id,index:c,name:a(this).data().name||!1}}).css({"float":"left"}).width(b.itemW),this.opts.autosize&&this.navItems.each(function(){var c=a(this),d=parseInt(c.parent().css("marginLeft"));c.width(b.ele.width()/b.items.length-d).css({paddingLeft:0,paddingRight:0})})},goTo:function(a){var b=this.tabs[a].ele;this.index=parseInt(a),this.scroll[0].style.left=-this.itemW*this.index+"px",this.current=b,this.setActive(),this.opts.fixed?"":this.setHeight(!1,this.opts.callback)},setActive:function(){var a=this;this.navItems.removeClass("active").filter(":eq("+a.index+")").addClass("active")},setHeight:function(a,b){this.current.height("auto");var a=a||this.current.height(),c=this;this.mask.animate({height:a+"px"},c.opts.speed),b?b(this):""},reSize:function(a){this.layout(),this.goTo(this.index),a?a(this):""}},a.fn.tabs=function(c){return this.each(function(){a(this).data().tabs=new b(a(this),c)})}}(jQuery);